        <head>
<!-- Plotly.js -->
        <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
        </head>
        <body>
        <!-- Plotly chart will be drawn inside this DIV -->
        <div id="myDiv"></div>
        <script>
Plotly.d3.csv('data/data_for_js_plot.csv',
    function(err, rows){
      function unpack(rows, key) {
          return rows.map(function(row) { return row[key]; });
      }
/*
Plotly.d3.csv('https://raw.githubusercontent.com/plotly/datasets/master/2011_february_us_airport_traffic.csv', function(err, rows){
      function unpack(rows, key) {
          return rows.map(function(row) { return row[key]; });
      }
      */
var scl = [[0,'rgb(5, 10, 172)'],[0.35,'rgb(40, 60, 190)'],[0.5,'rgb(70, 100, 245)'], [0.6,'rgb(90, 120, 245)'],[0.7,'rgb(106, 137, 247)'],[1,'rgb(220, 220, 220)']];  
  
var data = [{
    type:'scattermapbox',
    /*locationmode: 'USA-states',*/
    lon: unpack(rows, 'Longitude'),
    lat: unpack(rows, 'Latitude'),
    hoverinfor:  unpack(rows, 'city'),
    text:  unpack(rows, 'city'),
    mode: 'markers',
    marker: {
      size: unpack(rows, '2010'),
      opacity: 0.5,
      line: {
        width: 1,
        color: 'rgb(102,102,102)'
      },
      color: 'rgb(255,0,0)'
    }
}];

var layout = {
      title: 'AQI Levels in California',
      showlegend: false,
      autosize: true,
      hovermode:'closest',
mapbox: {
    bearing:0,
    center: {
      lat:37,
      lon:-118
    },
    pitch:0,
    zoom:4,
    style:'dark'
      },
    };

Plotly.setPlotConfig({
  mapboxAccessToken: 'pk.eyJ1IjoiYW5ha2FpMyIsImEiOiJjamZsbm53dTUwanljMndzMnR0ZXZiOWUzIn0.tJZ5UpqBKnHl-TbScs7c5A'
})
  
Plotly.plot(myDiv, data, layout, {showLink: false});
  
});
        </script>
        </body>